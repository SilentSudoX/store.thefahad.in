<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Google Play</title>
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/7/7a/Google_Play_2022_logo.svg" type="image/svg+xml">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Configuration & Styles -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gray: {
                            50: '#F9FAFB',
                            100: '#F3F4F6',
                            900: '#111827',
                        },
                        accent: '#00E676', // Play Store Green
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        /* Hide Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Glassmorphism Header */
        .glass {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Animations */
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        .slide-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* Circular Progress SVG */
        .progress-ring__circle {
            transition: stroke-dashoffset 0.1s linear;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen pb-20">

    <!-- Header -->
    <header id="main-header" class="fixed top-0 w-full z-50 bg-white/95 backdrop-blur-md px-4 py-3 transition-transform duration-300 border-b border-gray-100 shadow-sm">
        <div class="flex items-center justify-between">
            <!-- Logo -->
            <img src="https://upload.wikimedia.org/wikipedia/commons/7/7a/Google_Play_2022_logo.svg" alt="Google Play" class="h-8 w-auto">
            
            <!-- Icons -->
            <div class="flex items-center gap-4">
                <i data-lucide="search" class="w-6 h-6 text-gray-600 cursor-pointer" onclick="switchTab('search')"></i>
                <i data-lucide="bell" class="w-6 h-6 text-gray-600"></i>
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=GoogleUser" alt="User" class="w-8 h-8 rounded-full border border-gray-200 bg-gray-100">
            </div>
        </div>
    </header>

    <!-- Tab Search Bar (Sticky) -->
    <div id="tab-search-bar" class="hidden fixed top-[60px] w-full z-40 px-4 py-3 bg-white/95 backdrop-blur-md border-b border-gray-100 shadow-sm transition-all">
        <div class="bg-gray-100 rounded-full flex items-center px-4 py-2.5">
            <i data-lucide="search" class="w-4 h-4 text-gray-500 mr-2"></i>
            <input type="text" placeholder="Search apps & games" class="bg-transparent border-none text-gray-900 text-sm flex-1 focus:outline-none placeholder-gray-500" oninput="handleSearch(this.value)">
        </div>
    </div>

    <!-- Main Content Area -->
    <main id="app-root" class="pt-20 px-4 max-w-2xl mx-auto">
        <!-- Content injected via JS -->
    </main>

    <!-- Bottom Navigation -->
    <nav id="bottom-nav" class="fixed bottom-0 w-full bg-white border-t border-gray-200 pb-4 pt-3 px-6 flex justify-between items-center z-50 transition-transform duration-300">
        <div id="nav-game" class="flex flex-col items-center gap-1 text-accent cursor-pointer" onclick="switchTab('game')">
            <div class="icon-container w-12 h-8 flex items-center justify-center rounded-full bg-accent/10">
                <i data-lucide="gamepad-2" class="w-5 h-5 fill-current"></i>
            </div>
            <span class="text-[11px] font-medium">Games</span>
        </div>
        <div id="nav-app" class="flex flex-col items-center gap-1 text-gray-500 cursor-pointer" onclick="switchTab('app')">
            <div class="icon-container w-12 h-8 flex items-center justify-center rounded-full transition-colors">
                <i data-lucide="layout-grid" class="w-6 h-6"></i>
            </div>
            <span class="text-[10px] font-medium">Apps</span>
        </div>
        <div id="nav-search" class="flex flex-col items-center gap-1 text-gray-500 cursor-pointer" onclick="switchTab('search')">
            <div class="icon-container w-12 h-8 flex items-center justify-center rounded-full transition-colors">
                <i data-lucide="search" class="w-5 h-5"></i>
            </div>
            <span class="text-[10px] font-medium">Search</span>
        </div>
        <div id="nav-book" class="flex flex-col items-center gap-1 text-gray-500 cursor-pointer" onclick="switchTab('book')">
            <div class="icon-container w-12 h-8 flex items-center justify-center rounded-full transition-colors">
                <i data-lucide="book" class="w-6 h-6"></i>
            </div>
            <span class="text-[10px] font-medium">Books</span>
        </div>
    </nav>

    <!-- JavaScript Logic -->
    <script>
        // --- Mock Data ---
        let activeTab = 'game'; // Default tab

        const APPS = [
            {
                id: 1,
                name: "Cosmic Racer",
                developer: "Nebula Studios",
                rating: 4.8,
                downloads: "10M+",
                category: "Racing",
                type: "game",
                contentRating: "7+",
                icon: "https://api.dicebear.com/7.x/shapes/svg?seed=Cosmic",
                downloadLink: "https://example.com/cosmic-racer.apk",
                description: "Experience the thrill of intergalactic racing. Customize your ship, challenge players worldwide, and dominate the galaxy in this high-octane racer.",
                screenshots: [
                    "https://images.unsplash.com/photo-1535242208474-9a2793260ca8?w=500&q=80",
                    "https://images.unsplash.com/photo-1614726365723-49cfae92782f?w=500&q=80",
                    "https://images.unsplash.com/photo-1614332287897-cdc485fa562d?w=500&q=80"
                ]
            },
            {
                id: 2,
                name: "Zen Focus",
                developer: "Mindful Inc",
                rating: 4.5,
                downloads: "5M+",
                category: "Productivity",
                type: "app",
                contentRating: "3+",
                icon: "https://api.dicebear.com/7.x/shapes/svg?seed=Zen",
                downloadLink: "#",
                description: "Achieve a state of flow with Zen Focus. Block distractions, track your time, and meditate with built-in ambient sounds.",
                screenshots: ["https://images.unsplash.com/photo-1518609878373-06d740f60d8b?w=500&q=80"]
            },
            {
                id: 3,
                name: "FitTrack Pro",
                developer: "Health Corp",
                rating: 4.2,
                downloads: "1M+",
                category: "Health",
                type: "app",
                contentRating: "3+",
                icon: "https://api.dicebear.com/7.x/shapes/svg?seed=Fit",
                downloadLink: "#",
                description: "Your personal fitness companion. Track calories, steps, and sleep cycles with precision.",
                screenshots: ["https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=500&q=80"]
            },
            {
                id: 4,
                name: "Pixel Dungeon",
                developer: "Retro Games",
                rating: 4.9,
                downloads: "500K+",
                category: "RPG",
                type: "game",
                contentRating: "12+",
                icon: "https://api.dicebear.com/7.x/shapes/svg?seed=Pixel",
                downloadLink: "#",
                description: "A classic roguelike with pixel art graphics. Explore deep dungeons, fight monsters, and find treasure.",
                screenshots: ["https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=500&q=80"]
            },
            {
                id: 5,
                name: "Crypto Watch",
                developer: "FinTech Ltd",
                rating: 3.8,
                downloads: "2M+",
                category: "Finance",
                type: "app",
                contentRating: "3+",
                icon: "https://api.dicebear.com/7.x/shapes/svg?seed=Crypto",
                downloadLink: "#",
                description: "Real-time cryptocurrency tracker. Set alerts, view charts, and manage your portfolio.",
                screenshots: ["https://images.unsplash.com/photo-1518546305927-5a555bb7020d?w=500&q=80"]
            },
            {
                id: 6,
                name: "Atomic Habits",
                developer: "James Clear",
                rating: 4.9,
                downloads: "10M+",
                category: "Self-help",
                type: "book",
                contentRating: "12+",
                icon: "https://upload.wikimedia.org/wikipedia/en/0/06/Atomic_Habits.jpg", 
                downloadLink: "#",
                description: "No matter your goals, Atomic Habits offers a proven framework for improving--every day.",
                screenshots: ["https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=500&q=80"]
            },
            {
                id: 7,
                name: "Subway Surfers",
                developer: "SYBO Games",
                rating: 4.6,
                downloads: "1B+",
                category: "Arcade",
                type: "game",
                contentRating: "10+",
                icon: "https://api.dicebear.com/7.x/shapes/svg?seed=Subway",
                downloadLink: "#",
                description: "DASH as fast as you can! DODGE the oncoming trains! Help Jake, Tricky & Fresh escape from the grumpy Inspector and his dog.",
                screenshots: ["https://images.unsplash.com/photo-1511512578047-dfb367046420?w=500&q=80"]
            },
            {
                id: 8,
                name: "WhatsApp",
                developer: "Meta",
                rating: 4.3,
                downloads: "5B+",
                category: "Communication",
                type: "app",
                contentRating: "12+",
                icon: "https://api.dicebear.com/7.x/shapes/svg?seed=WhatsApp",
                downloadLink: "#",
                description: "Simple. Reliable. Private. WhatsApp from Meta is a FREE messaging and video calling app. It's used by over 2B people in more than 180 countries.",
                screenshots: ["https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=500&q=80"]
            },
            {
                id: 9,
                name: "Spotify",
                developer: "Spotify AB",
                rating: 4.4,
                downloads: "1B+",
                category: "Music",
                type: "app",
                contentRating: "12+",
                icon: "https://api.dicebear.com/7.x/shapes/svg?seed=Spotify",
                downloadLink: "#",
                description: "Spotify is the best way to listen to music and podcasts on mobile or tablet. Search for any track, artist or album and listen for free.",
                screenshots: ["https://images.unsplash.com/photo-1614680376593-902f74cf0d41?w=500&q=80"]
            },
            {
                id: 10,
                name: "Harry Potter",
                developer: "J.K. Rowling",
                rating: 4.8,
                downloads: "100M+",
                category: "Fantasy",
                type: "book",
                contentRating: "9+",
                icon: "https://api.dicebear.com/7.x/shapes/svg?seed=Harry",
                downloadLink: "#",
                description: "Turning the envelope over, his hand trembling, Harry saw a purple wax seal bearing a coat of arms; a lion, an eagle, a badger and a snake surrounding a large letter 'H'.",
                screenshots: ["https://images.unsplash.com/photo-1618666012174-83b441c0bc76?w=500&q=80"]
      
      
            },

{
        id: 1769937954517,
        name: "ViralTrack ",
        developer: "fahad",
        rating: 4.6,
        downloads: "10K+",
        category: "Socal ",
        type: "app",
        contentRating: "12+",
        icon: "",
        downloadLink: "#",
        description: "sffffe",
        screenshots: [
            
        ]
    },


    {
        id: 1769937954517,
        name: "ViralTrack ",
        developer: "fahad",
        rating: 4.6,
        downloads: "10K+",
        category: "Socal ",
        type: "app",
        contentRating: "12+",
        icon: "",
        downloadLink: "#",
        description: "sffffe",
        screenshots: [
            
        ]
    },


   
    {
        id: 1770297865762,
        name: "Viral Track ",
        developer: "Fahad",
        rating: 4.5,
        downloads: "20K+",
        category: "Social Media ",
        type: "app",
        contentRating: "12+",
        icon: "https://appstore.thefahad.in/images/Viraltrack.png",
        downloadLink: "https://appstore.thefahad.in/images/Viral_Track_V8.0.apk",
        description: "Viral Track is a powerful Apps that provides high-quality and organic engagement for your social media accounts. Whether you're an influencer, business owner, or marketer, our advanced services help you boost your reach and visibility effortlessly.",
        screenshots: [
            "/images/1.jpg",
            "/images/2.jpg",
            "/images/3.jpg",
            "/images/4.jpg"
        ]
    },
            // <-- YAHAN PASTE KAREIN (Admin panel se copy kiya hua code yahan dalein)
        ];

        // --- Render Functions ---

        function switchTab(tab) {
            activeTab = tab;
            
            // Auto-focus search input if switching to search tab
            if (tab === 'search') {
                setTimeout(() => document.querySelector('#tab-search-bar input')?.focus(), 100);
            }
            
            renderHome();
            updateBottomNav();
        }

        function updateBottomNav() {
            const tabs = ['game', 'app', 'search', 'book'];
            
            tabs.forEach(t => {
                const el = document.getElementById(`nav-${t}`);
                const iconContainer = el.querySelector('.icon-container');
                const icon = el.querySelector('i'); // lucide icon svg
                
                if (t === activeTab) {
                    el.classList.replace('text-gray-500', 'text-accent');
                    iconContainer.classList.add('bg-accent/10');
                    if(icon) icon.classList.add('fill-current');
                } else {
                    el.classList.replace('text-accent', 'text-gray-500');
                    iconContainer.classList.remove('bg-accent/10');
                    if(icon) icon.classList.remove('fill-current');
                }
            });
            
            lucide.createIcons();
        }

        function handleSearch(query) {
            renderHome(query);
        }

        function renderHome(searchQuery = '') {
            const root = document.getElementById('app-root');
            const searchBar = document.getElementById('tab-search-bar');

            // Show Header & Nav
            document.getElementById('main-header').classList.remove('-translate-y-full');
            document.getElementById('bottom-nav').classList.remove('translate-y-full');
            
            // Handle Search Bar & Padding
            if (activeTab === 'search') {
                searchBar.classList.remove('hidden');
                root.classList.add('pt-36');
                root.classList.remove('pt-20');
            } else {
                searchBar.classList.add('hidden');
                root.classList.remove('pt-36');
                root.classList.add('pt-20');
            }

            if (!searchQuery) window.scrollTo(0, 0);
            
            const filteredApps = searchQuery 
                ? APPS.filter(app => app.name.toLowerCase().includes(searchQuery.toLowerCase())) // Global search
                : (activeTab === 'search' ? APPS : APPS.filter(app => app.type === activeTab)); // Filter by tab
            
            // Get top apps for slider (fallback to APPS if filter is empty, or just show filtered ones if search is active)
            const sliderApps = (!searchQuery && filteredApps.length > 0) ? filteredApps.slice(0, 4) : APPS.slice(0, 4);
            const showHero = !searchQuery && activeTab !== 'search';

            // Split apps for the requested layout: Grid (6) -> List (6) -> Grid (6)
            const section1 = filteredApps.slice(0, 6);
            const section2 = filteredApps.slice(6, 12);
            const section3 = filteredApps.slice(12, 18);
            
            let html = `
                <div class="fade-in">
                    ${showHero ? `<!-- Hero Slider -->
                    <div class="flex overflow-x-auto snap-x snap-mandatory no-scrollbar gap-4 mb-8 -mx-4 px-4 pb-2">
                        ${sliderApps.map(app => `
                            <div class="relative flex-shrink-0 w-[85%] h-52 rounded-2xl overflow-hidden snap-center shadow-md cursor-pointer bg-gray-900" onclick="renderDetail(${app.id})">
                                <img src="${app.screenshots[0]}" class="absolute inset-0 w-full h-full object-cover opacity-60" />
                                <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/20 to-transparent"></div>
                                <div class="relative z-10 p-5 h-full flex flex-col justify-end items-start">
                                    <span class="text-[10px] font-bold uppercase tracking-widest text-accent mb-1 bg-white/10 px-2 py-0.5 rounded backdrop-blur-sm">Featured</span>
                                    <h2 class="text-2xl font-bold text-white mb-1 leading-tight shadow-black drop-shadow-md">${app.name}</h2>
                                    <p class="text-gray-200 text-xs line-clamp-2 mb-3 max-w-[90%] drop-shadow-md">${app.description}</p>
                                    <button class="bg-white text-gray-900 px-4 py-2 rounded-lg font-bold text-xs shadow-lg active:scale-95 transition-transform">Install</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>` : ''}

                    <!-- Section 1: Grid (6 items) -->
                    ${section1.length > 0 ? `
                    <div class="flex items-center justify-between mb-4 mt-2">
                        <h2 class="text-xl font-bold capitalize">${searchQuery ? 'Search Results' : 'Recommended'}</h2>
                        <i data-lucide="arrow-right" class="w-5 h-5 text-gray-400"></i>
                    </div>
                    <div class="grid grid-cols-3 gap-4 mb-8">
                        ${section1.map(app => `
                            <div class="group cursor-pointer" onclick="renderDetail(${app.id})">
                                <div class="bg-white rounded-2xl p-3 hover:shadow-md transition-all border border-gray-100 shadow-sm">
                                    <img src="${app.icon}" alt="${app.name}" class="w-full aspect-square rounded-xl mb-3 shadow-sm object-cover bg-gray-100">
                                    <h3 class="font-semibold text-xs truncate mb-1">${app.name}</h3>
                                    <div class="flex items-center gap-1">
                                        <span class="text-[10px] text-gray-500">${app.rating}</span>
                                        <i data-lucide="star" class="w-3 h-3 text-accent fill-current"></i>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>` : (filteredApps.length === 0 ? '<div class="text-center text-gray-400 py-8">No items found</div>' : '')}

                    <!-- Section 2: List (6 items) -->
                    ${section2.length > 0 ? `
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold capitalize">Top Rated</h2>
                        <i data-lucide="arrow-right" class="w-5 h-5 text-gray-400"></i>
                    </div>
                    <div class="flex flex-col gap-3 mb-8">
                        ${section2.map(app => `
                            <div class="flex items-center gap-3 p-3 bg-white rounded-xl border border-gray-100 shadow-sm cursor-pointer" onclick="renderDetail(${app.id})">
                                <img src="${app.icon}" class="w-12 h-12 rounded-lg bg-gray-100 object-cover">
                                <div class="flex-1 min-w-0">
                                    <h3 class="font-semibold text-sm truncate">${app.name}</h3>
                                    <div class="text-xs text-gray-500 truncate">${app.rating} ★ • ${app.category}</div>
                                </div>
                                <button class="bg-gray-100 text-accent font-bold px-3 py-1.5 rounded-full text-xs">Install</button>
                            </div>
                        `).join('')}
                    </div>` : ''}

                    <!-- Section 3: Grid (6 items) -->
                    ${section3.length > 0 ? `
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold capitalize">Suggested for you</h2>
                        <i data-lucide="arrow-right" class="w-5 h-5 text-gray-400"></i>
                    </div>
                    <div class="grid grid-cols-3 gap-4 mb-8">
                        ${section3.map(app => `
                            <div class="group cursor-pointer" onclick="renderDetail(${app.id})">
                                <div class="bg-white rounded-2xl p-3 hover:shadow-md transition-all border border-gray-100 shadow-sm">
                                    <img src="${app.icon}" alt="${app.name}" class="w-full aspect-square rounded-xl mb-3 shadow-sm object-cover bg-gray-100">
                                    <h3 class="font-semibold text-xs truncate mb-1">${app.name}</h3>
                                    <div class="flex items-center gap-1">
                                        <span class="text-[10px] text-gray-500">${app.rating}</span>
                                        <i data-lucide="star" class="w-3 h-3 text-accent fill-current"></i>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>` : ''}
                </div>
            `;
            
            root.innerHTML = html;
            lucide.createIcons();
        }

        function renderDetail(appId) {
            const app = APPS.find(a => a.id === appId);
            const root = document.getElementById('app-root');
            
            // Hide Bottom Nav only (Keep Header visible)
            document.getElementById('tab-search-bar').classList.add('hidden');
            document.getElementById('bottom-nav').classList.add('translate-y-full');
            
            // Reset Padding
            root.classList.remove('pt-36');
            root.classList.add('pt-20');
            
            window.scrollTo(0, 0);

            // Default screenshots if none provided
            const screenshots = app.screenshots && app.screenshots.length > 0 
                ? app.screenshots 
                : ["https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=500&q=80"];

            let html = `
                <div class="slide-up pb-10">
                    <!-- Nav Back -->
                    <div class="flex items-center justify-between mb-6">
                        <button onclick="renderHome()" class="flex items-center gap-2 px-3 py-1.5 -ml-2 hover:bg-gray-100 rounded-full transition-colors text-gray-700">
                            <i data-lucide="arrow-left" class="w-5 h-5"></i>
                            <span class="text-sm font-medium">Back</span>
                        </button>
                        <div class="flex items-center gap-4">
                            <i data-lucide="search" class="w-6 h-6 text-gray-600 cursor-pointer" onclick="switchTab('search')"></i>
                            <i data-lucide="share-2" class="w-6 h-6 text-gray-600 cursor-pointer" onclick="shareApp(${app.id})"></i>
                            <i data-lucide="more-vertical" class="w-6 h-6 text-gray-600 cursor-pointer"></i>
                        </div>
                    </div>

                    <!-- App Header -->
                    <div class="flex gap-5 mb-6">
                        <img src="${app.icon}" class="w-24 h-24 rounded-2xl shadow-xl bg-gray-100" />
                        <div class="flex-1 flex flex-col justify-center">
                            <h1 class="text-2xl font-bold leading-tight mb-1">${app.name}</h1>
                            <p class="text-accent font-medium text-sm mb-2">${app.developer}</p>
                            <div class="text-xs text-gray-500">${app.category}</div>
                        </div>
                    </div>

                    <!-- Stats Row -->
                    <div class="flex items-center justify-between mb-8 px-2">
                        <div class="flex flex-col items-center w-1/3 border-r border-gray-200">
                            <div class="flex items-center font-bold text-gray-900">
                                <span>${app.rating}</span>
                                <i data-lucide="star" class="w-3 h-3 fill-current ml-1"></i>
                            </div>
                            <span class="text-[10px] text-gray-500">1M reviews</span>
                        </div>
                        <div class="flex flex-col items-center w-1/3 border-r border-gray-200">
                            <span class="font-bold text-gray-900">${app.downloads}</span>
                            <span class="text-[10px] text-gray-500">Downloads</span>
                        </div>
                        <div class="flex flex-col items-center w-1/3">
                            <span class="font-bold text-gray-900 bg-gray-100 px-1.5 py-0.5 rounded text-[10px] border border-gray-300">${app.contentRating || '3+'}</span>
                            <span class="text-[10px] text-gray-500 mt-0.5">Rated for ${app.contentRating || '3+'}</span>
                        </div>
                    </div>

                    <!-- Download Button Container -->
                    <div class="mb-8 h-12" id="download-container">
                        <button onclick="startDownload(this, '${app.downloadLink}')" 
                            class="w-full h-12 bg-accent text-white font-bold rounded-full shadow-lg shadow-green-200 active:scale-95 transition-all flex items-center justify-center gap-2 text-base">
                            Install
                        </button>
                    </div>

                    <!-- Screenshots -->
                    <div class="mb-8">
                        <h2 class="text-lg font-bold mb-4">Preview</h2>
                        <div class="flex gap-4 overflow-x-auto no-scrollbar snap-x snap-mandatory pb-2">
                            ${screenshots.map(src => `
                                <img src="${src}" class="h-56 w-auto rounded-xl shadow-md snap-center object-cover bg-gray-100" />
                            `).join('')}
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="mb-8">
                        <h2 class="text-lg font-bold mb-2">About this app</h2>
                        <p class="text-gray-600 text-sm leading-relaxed">${app.description}</p>
                    </div>

                    <!-- Ratings -->
                    <div class="mb-8">
                        <h2 class="text-lg font-bold mb-4">Ratings</h2>
                        <div class="flex items-center gap-6">
                            <div class="text-center">
                                <div class="text-5xl font-bold text-gray-900">${app.rating}</div>
                                <div class="flex text-accent justify-center mt-1">
                                    ${Array(5).fill(0).map(() => `<i data-lucide="star" class="w-3 h-3 fill-current"></i>`).join('')}
                                </div>
                            </div>
                            <div class="flex-1 space-y-1">
                                ${[80, 15, 3, 1, 1].map((pct, i) => `
                                    <div class="flex items-center gap-2">
                                        <span class="text-[10px] font-bold w-2">${5-i}</span>
                                        <div class="flex-1 h-1.5 bg-gray-100 rounded-full overflow-hidden">
                                            <div class="h-full bg-accent rounded-full" style="width: ${pct}%"></div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            root.innerHTML = html;
            lucide.createIcons();
        }

        // --- Download Logic ---

        async function shareApp(id) {
            const app = APPS.find(a => a.id === id);
            if (!app) return;
            
            const shareData = {
                title: app.name,
                text: `Check out ${app.name} on Google Play!`,
                url: window.location.href
            };

            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                } else {
                    await navigator.clipboard.writeText(window.location.href);
                    alert('Link copied to clipboard!');
                }
            } catch (err) {
                console.error('Error sharing:', err);
            }
        }

        function startDownload(btn, link) {
            const container = document.getElementById('download-container');
            
            // 1. Replace button with Progress Circle
            container.innerHTML = `
                <div class="flex items-center justify-center w-full h-full">
                    <div class="relative w-12 h-12">
                        <svg class="w-full h-full" viewBox="0 0 100 100">
                            <circle class="text-gray-200 stroke-current" stroke-width="8" cx="50" cy="50" r="40" fill="transparent"></circle>
                            <circle id="progress-circle" class="text-accent progress-ring__circle stroke-current" stroke-width="8" stroke-linecap="round" cx="50" cy="50" r="40" fill="transparent" stroke-dasharray="251.2" stroke-dashoffset="251.2"></circle>
                        </svg>
                        <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center">
                            <span id="progress-text" class="text-[10px] font-bold text-accent">0%</span>
                        </div>
                    </div>
                </div>
            `;

            const circle = document.getElementById('progress-circle');
            const text = document.getElementById('progress-text');
            const radius = circle.r.baseVal.value;
            const circumference = radius * 2 * Math.PI;
            
            circle.style.strokeDasharray = `${circumference} ${circumference}`;
            circle.style.strokeDashoffset = circumference;

            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;

                const offset = circumference - (progress / 100) * circumference;
                circle.style.strokeDashoffset = offset;
                text.innerText = Math.floor(progress) + '%';

                if (progress === 100) {
                    clearInterval(interval);
                    setTimeout(() => finishDownload(container, link), 500);
                }
            }, 200);
        }

        function finishDownload(container, link) {
            // 2. Trigger Direct Download
            // Create a temporary link to trigger download
            const a = document.createElement('a');
            a.href = link;
            a.download = ''; // Attribute to trigger download
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            // 3. Show "Open" Button
            container.innerHTML = `
                <button class="w-full h-12 bg-white border border-accent text-accent font-bold rounded-full shadow-lg shadow-green-100 animate-[pulse_2s_infinite] flex items-center justify-center gap-2">
                    Open
                </button>
            `;
        }

        // --- Initialization ---
        window.addEventListener('DOMContentLoaded', () => {
            renderHome();
            updateBottomNav();
        });

    </script>
</body>
</html>
